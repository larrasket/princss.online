{{- /* Extract org metadata from raw content */ -}}
{{- /* Usage: {{ partial "org-param.html" (dict "page" . "key" "image") }} */ -}}
{{- $page := .page -}}
{{- $key := .key -}}
{{- $value := "" -}}

{{- if and $page.File (eq $page.File.Ext "org") -}}
  {{- $rawContent := $page.RawContent -}}
  {{- $pattern := printf `(?m)^#\+%s:\s*(.+)$` $key -}}
  {{- $match := findRE $pattern $rawContent 1 -}}
  {{- if $match -}}
    {{- $line := index $match 0 -}}
    {{- $value = replaceRE (printf `^#\+%s:\s*` $key) "" $line -}}
  {{- end -}}
{{- end -}}

{{- $value -}}
