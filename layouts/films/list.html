{{ define "styles" }}
<link rel="stylesheet" href="/styles/films.css" />
{{ end }} {{ define "main" }}
<div class="body-div">
  <img src="/media/images/films_header.png" />
  <div class="header" style="position: sticky; top: 0px">
    <div class="left-header">
      <a href="/">vita nouva</a> /
      <a href="/films/" style="font-weight: bold">films</a> /
      <a href="https://letterboxd.com/lr0/">letterboxd</a>
    </div>
    <div class="right-header">
      Shakespeare's Globe Theater (1886-88) "Fresco" [Burgtheater, Vienna,
      Austria]
    </div>
  </div>
  <div class="content">
    {{/* Get page size from config, default to 10, 0 = no pagination */}}
    {{ $pageSize := site.Params.filmsPageSize | default 10 }}
    
    {{/* Apply pagination if page size > 0 */}}
    {{ $pages := .Pages.ByDate.Reverse }}
    {{ $paginator := false }}
    {{ if gt $pageSize 0 }}
      {{ $paginator = .Paginate $pages $pageSize }}
      {{ $pages = $paginator.Pages }}
    {{ end }}
    
    {{ range $pages }}
    <div class="film">
      <div class="left">
        <div class="frame">
          <img src="{{ partial "org-param.html" (dict "page" . "key" "image")
          }}" style="z-index: 1;">
        </div>
        <div class="info">
          <div class="title">
            {{ partial "org-param.html" (dict "page" . "key" "title") }}
          </div>
          <div class="genre">
            {{ partial "org-param.html" (dict "page" . "key" "genre") }}
          </div>
          <div class="director">
            dir. {{ partial "org-param.html" (dict "page" . "key" "director") }}
          </div>
        </div>
      </div>
      <div class="right">
        {{ partial "resolve-roam-links.html" .Content }}<a
          class="copy-permalink"
          data-url="{{ .Permalink }}"
          title="Copy permalink"
          >[permlink]</a
        >
        {{ partial "native-backlinks.html" . }}
      </div>
    </div>
    {{ end }}
    
    {{/* Pagination navigation */}}
    {{ if $paginator }}
      {{ partial "pagination.html" $paginator }}
    {{ end }}
  </div>
</div>
{{ end }} {{ define "scripts" }}
<script>
  document.querySelectorAll(".copy-permalink").forEach((el) => {
    el.addEventListener("click", async (e) => {
      e.preventDefault();
      const url = el.dataset.url;
      try {
        await navigator.clipboard.writeText(url);
        const original = el.textContent;
        el.textContent = "[copied]";
        setTimeout(() => (el.textContent = original), 1500);
      } catch (err) {
        console.error("Failed to copy:", err);
      }
    });
  });
</script>
{{ end }}
